- DBMS由多个组件构成，如下图只是举例，并不完全。而其中的 并发控制[Concurrency Control] 和 数据恢复[Recovery] 是横跨多个层级的。
	- ![image.png](../assets/image_1717987012659_0.png)
	- 并发控制的目的是 避免数据竞争的发生
	- 数据恢复的目的是 在实现持久化时一直保持正确的数据库状态
- #事务  Transaction
	- 是一系列操作的集合；是DBMS执行的最基本单位(原子性)。
- 事务问题的简化模型
	- 数据库：一组固定不变的、无重复项的数据表的集合
	- 事务：一系列的读和写操作
		- 新事务的开启使用`Begin`关键字
		- 事务的提交或放弃使用 `Commit` 或 `Abort` 关键字
- 衡量一种事务实现方式是否正确的标准是 ACID
	- 原子性 Atomicity
		- 事务内的所有操作，要么都发生、要么都没发生
	- 一致性 Consistency
		- 事务开始时，DB是状态a；事务结束时，DB还是状态a.DB中的不变量(与本次事务无关的相关数据)不会发生变化。
		- 对操作者来说，看起来是正确的
	- 隔离性 Isolation
		- 正在执行的事务a和b，他们是互不影响的。
	- 持久性 Durability
		- 一旦事务提交，它的改动被持久化。
- 事务的原子性 Atomicity
	- 执行一个事务只会迎来两种结局：要么完成全部的内部操作然后commit；要么中途被abort，进行回滚；
- 实现事务的原子性，有两种手段
	- 日志 Logging
		- 事务在执行的过程中，每执行一步都要记录一下“如果要回滚这一步该怎么办”.
		- 这种日志也被称为"undo log"-回滚日志，内存和磁盘中都会有它的备份.
	- 脏页备份 Shadow Paging
		- 事务想修改哪些文件页，DBMS就给这些页做备份，事务操作这些备份，如果事务成功提交，那就拿备份替换下原有的页，否则就删除备份，实现回滚
- 事务的一致性 Consistency
	- 数据库中的所反映出的外部世界应该是逻辑上正确的，而且我们对数据库所执行的查询的结果也是逻辑上能讲的通的
	- 一致性分为如下两个方面
		- 数据一致性
			- 后面发生的事务要能看到在它之前发生的事务导致的结果
		- 业务一致性