- ![image.png](../assets/image_1673398301920_0.png)
- [[Java 类加载机制]]
	- 执行`<clinit>`方法，即被static修饰的属性和代码块
- 分配内存
	- 指针碰撞
		- 如果[[Java 堆内存]]是规整的。分配时将位于中间的指针指示器向空闲的内存移动一段与大小相等的距离
	- 空闲列表
		- 如果[[Java 堆内存]]是不规整的，则需要JVM维护一个列表用来记录哪些内存可用。在分配时从列表中查询出足够大的内存分配给对象，并在分配后更新列表记录。
	- 内存是否规整的解释
		- 规整的内存即经过GC整理的，所有用过的内存放在一边，而空闲的放在另一边。这与 [[Java GC]]算法和GC时间相关.
- 分配内存时的并发处理
	- CAS + 失败重试
	- 本地线程分配缓冲 Thread Local Allocation Buffer
		- 每个线程在Java堆中预先分配一小块内存，先用自己的，用完再申请，此时才需要同步锁。
- 初始化
- `<init>`方法，包括构造函数、一般代码块和一般属性
- ## 对象如何访问
	- 句柄访问
		- 局部变量存放在[[Java 虚拟机栈]]中的局部变量表，指向[[Java 堆内存]]中 ((63be0f36-eaf1-4f67-84b9-d643b432a521))
		- 好处是有稳定的地址，在 [[Java GC]]时会移动对象，改变频繁
	- 直接指针
		- 局部变量存放在[[Java 虚拟机栈]]中的局部变量表，指向[[Java 堆内存]]中对象池的对象
		- 对象池的对象再有一个指针指向对应类的实例
		- 好处是数据更快，节省了一次指针定位的开销
- ## 对象的引用类型
  id:: 63be09ad-e4d7-4923-825b-d87a62faa166
	-